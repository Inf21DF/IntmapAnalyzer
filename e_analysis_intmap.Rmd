---
title: "E - Intmap Analyse"
author: "Denis Feuerstein"
date: "2024-02-02"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## R Markdown


```{r}
problem_files_list <- list.files(path = "csv_files")
problem_lst = vector("list", length=length(problem_files_list))
i = 1

for (file_name in problem_files_list) {
  file_path <- paste("csv_files/", file_name, sep='')
  first_file <- read.csv(file_path, sep=";", header=TRUE, row.names=NULL)
  first_file$ProblemClass <- substr(file_name, 1, 3)
  first_file$Problem <- sub("\\.csv", "", file_name)
  problem_lst[[i]] <- first_file
  i = i+1
}
problems <- do.call(rbind, problem_lst)


common_files_list <- list.files(path = "csv_common_stats")
common_stat_lst = vector("list", length=length(common_files_list))
i = 1

for (file_name in common_stat_lst) {
  file_path <- paste("csv_common_stats/", "AGT_common_stats.csv", sep='')
  first_file <- read.csv(file_path, sep=";", header=TRUE, row.names=NULL)
  common_stat_lst[[i]] <- first_file
  i = i+1
}
common_stats <- do.call(rbind, common_stat_lst)

common_stats$tree_empty_ratio <- common_stats$EmptyInvoked/common_stats$TreeInvoked
common_stats$tree_int_ratio <- common_stats$IntInvoked/common_stats$TreeInvoked
common_stats$tree_array_ratio <- common_stats$ArrayInvoked/common_stats$TreeInvoked
common_stats$array_empty_ratio <- common_stats$EmptyInvoked/common_stats$ArrayInvoked
common_stats$array_int_ratio <- common_stats$IntInvoked/common_stats$ArrayInvoked
common_stats$empty_int_ratio <- common_stats$IntInvoked/common_stats$EmptyInvoked

common_stats_cleaned <- common_stats[which(!is.na(common_stats$IntInvoked)==TRUE),]
common_stats_cleaned <- common_stats_cleaned[which(!is.na(common_stats_cleaned$int_empty_ratio)==TRUE),]

str(problems)
str(common_stats)


min(common_cleaned_df$tree_empty_ratio)     # empty/tree    => 13.17913
min(common_cleaned_df$tree_int_ratio)       # int/tree      => 2.111111
min(common_cleaned_df$tree_array_ratio)     # array/tree    => 1.111111
min(common_cleaned_df$array_empty_ratio)    # empty/array   => 2.632878
min(common_cleaned_df$array_int_ratio)      # int/array     => 1.9
min(common_cleaned_df$empty_int_ratio)      # int/empty     => 0.007283919

max(common_cleaned_df$tree_empty_ratio)     # empty/tree    => 41.23534
max(common_cleaned_df$tree_int_ratio)       # int/tree      => 4931.364
max(common_cleaned_df$tree_array_ratio)     # array/tree    => 13.64274
max(common_cleaned_df$array_empty_ratio)    # empty/array   => 15.1
max(common_cleaned_df$array_int_ratio)      # int/array     => 361.4645
max(common_cleaned_df$empty_int_ratio)      # int/empty     => 7.947368

median(common_cleaned_df$tree_empty_ratio)     # empty/tree    => 27.93485
median(common_cleaned_df$tree_int_ratio)       # int/tree      => 171.3408
median(common_cleaned_df$tree_array_ratio)     # array/tree    => 7.724211
median(common_cleaned_df$array_empty_ratio)    # empty/array   => 3.551031
median(common_cleaned_df$array_int_ratio)      # int/array     => 22.47146
median(common_cleaned_df$empty_int_ratio)      # int/empty     => 0.1589089

mean(common_cleaned_df$tree_empty_ratio)     # empty/tree    => 27.71609
mean(common_cleaned_df$tree_int_ratio)       # int/tree      => 240.3827
mean(common_cleaned_df$tree_array_ratio)     # array/tree    => 7.523198
mean(common_cleaned_df$array_empty_ratio)    # empty/array   => 4.119955
mean(common_cleaned_df$array_int_ratio)      # int/array     => 26.12084
mean(common_cleaned_df$empty_int_ratio)      # int/empty     => 0.4253058

#<http://rmarkdown.rstudio.com>.
```

#Allgemeine Untersuchung
```{r, echo=FALSE}
library(ggplot2)
library(dplyr)
```

Häufigkeit Absolut
Wie häufig Empty - spielt Größe eine Rolle
Wie häufig Single - spielt Größe eine Rolle 
Max Value Integer 
Wie häufig Array pro Problem-Klasse
Wie häufig Tree pro Problem-Klasse
Welches ist der häufigste Datentyp

```{r, echo=FALSE}
#common_stats
```

#Tiefere Untersuchung: Tree und Array
MinKey            : int  0 0 0 0 0 0 0 0 0 0 ...
MaxKey            : int  0 0 0 0 0 0 0 0 0 0 ...
Offset            : int  NA NA NA NA NA NA NA NA NA NA ...
Size              : int  NA NA NA NA NA NA NA NA NA NA ...
Grow              : int  NA NA NA NA NA NA NA NA NA NA ...
Integer           : logi  NA NA NA NA NA NA ...
CountGetVal       : num  NA NA NA NA NA NA NA NA NA NA ...
CountGetRef       : num  NA NA NA NA NA NA NA NA NA NA ...
CountAssign       : num  NA NA NA NA NA NA NA NA NA NA ...
CountDelKey       : int  NA NA NA NA NA NA NA NA NA NA ...
CountArrayToTree  : num  NA NA NA NA NA NA NA NA NA NA ...
CountTreeToArray  : num  NA NA NA NA NA NA NA NA NA NA ...
NumberOfItems     : int  NA NA NA NA NA NA NA NA NA NA ...
NumberOfEmptyCells: int  NA NA NA NA NA NA NA NA NA NA ...
TreeHeight        : int  NA NA NA NA NA NA NA NA NA NA ...
MinNode           : int  NA NA NA NA NA NA NA NA NA NA ...
MaxNode           : int  NA NA NA NA NA NA NA NA NA NA ...
MinMaxDistance    : int  NA NA NA NA NA NA NA NA NA NA ...
Linearity         : num  NA NA NA NA NA NA NA NA NA NA ...
Density           : num  NA NA NA NA NA NA NA NA NA NA ...
Structure         : num  NA NA NA NA NA NA NA NA NA NA ...


## Vergleich zwischen Array und Tree
Größe
Dichte 
Verwendung (Also wie oft wurden die Strukturen insgesamt verwendet und wie oft wurden welche Funktionen angewendet)

```{r, echo=FALSE}

```

### Baum (Linearität und Dichte)

```{r, echo=FALSE}
TreeLinearity <- problems %>% filter(!is.na(Linearity)) 

ggplot(data = TreeLinearity, aes(x = Linearity, y = TreeHeight, group=factor(TreeHeight))) + stat_boxplot(geom = "errorbar") + geom_boxplot() + labs(x="Linearität", y="Baumhöhe", color="Typ")  + ggtitle("Linearität im Bezug zur Größe betrachtet")

TreeLinearity %>% ggplot(aes(x=Density, y=as.factor(TreeHeight), group=factor(TreeHeight))) + stat_boxplot(geom = "errorbar") + geom_boxplot() + labs(x="Dichte", y="Baumhöhe")  + ggtitle("Verteilung Dichte auf Baumhöhe")

```
